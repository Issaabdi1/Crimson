{% extends 'base_content_with_sidebar.html' %}
{% load static %}
{% block content %}
<link rel="stylesheet" href="{% static 'css/share_file.css' %}">
<div class="container mt-3">
  <form method="post" action="{% url 'share_file' %}">
    {% csrf_token %}
    <div class="row">
      <div class="col-12">
        <select id="file-select" class="form-select d-none" name="file-id">
          <option selected disabled> Select file: </option>
          {% for upload in uploads %}
            <option value="{{ upload.id }}">{{ upload.file.name }}</option>
          {% endfor %}
        </select>
        <h2> Select file: </h2>
        <div class="thumbnail-container">
          {% for upload in uploads %}
            <div class="thumbnail p-2" file-id="{{ upload.id }}">
              <img class="pdf-image p-2" src="{% static '/image/pdf_icon_svg.png' %}">
              <div class="file-name">{{ upload.file.name }}</div>
            </div>
          {% endfor %}
        </div>
      </div>
    </div>
    <br>
    <div class="row">
      <div class="col-12">
        {% if uploads %}
          <h2> Share to: </h2>
          <input type="text" id="search" class="col-md-6 form-control" placeholder="Search for username">
        {% endif %}
      </div>
    </div>
    <div class="row">
      <div class="col-md-6">
        <table class="table mt-3">
          <tbody id="filter">
            {% for user in all_users %}
              <tr style="display: none">
                <td class="align-middle">{{ user.username }}</td>
                <td class="text-end">
                  <button type="submit" name="user-id" value="{{ user.id }}" class="btn btn-primary">
                    <i class="bi bi-box-arrow-up"></i> Share
                  </button>
                </td>
              </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    </div>
  </form>
</div>

<script src="{% static 'js/share_file.js' %}"></script>
{% endblock %}